<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
    th:replace="~{layout :: html(content=~{::content}, pageTitle='Service Campaigns')}">

<body>
    <div th:fragment="content">
        <div class="d-flex justify-between align-center mb-3">
            <form th:action="@{/evm/campaigns}" method="get" class="search-bar">
                <input type="text" name="search" th:value="${search}" class="form-control"
                    placeholder="Search campaigns...">
                <button type="submit" class="btn btn-secondary"><i class="fas fa-search"></i></button>
            </form>
            <a th:href="@{/evm/campaigns/new}" class="btn btn-primary"><i class="fas fa-plus"></i> New Campaign</a>
        </div>

        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Campaign #</th>
                        <th>Title</th>
                        <th>Type</th>
                        <th>Severity</th>
                        <th>Status</th>
                        <th>Progress</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="campaign : ${campaigns.content}">
                        <td th:text="${campaign.campaignNumber}">SC123</td>
                        <td><a th:href="@{/evm/campaigns/{id}(id=${campaign.id})}" th:text="${campaign.title}">Title</a>
                        </td>
                        <td><span class="badge badge-info" th:text="${campaign.campaignType}">Type</span></td>
                        <td><span class="badge"
                                th:classappend="${campaign.severityLevel.name() == 'CRITICAL' ? 'badge-danger' : campaign.severityLevel.name() == 'HIGH' ? 'badge-warning' : 'badge-secondary'}"
                                th:text="${campaign.severityLevel}">Sev</span></td>
                        <td><span class="badge" th:classappend="${'status-' + campaign.status.name().toLowerCase()}"
                                th:text="${campaign.status}">Status</span></td>
                        <td th:text="${campaign.completedCount + '/' + (campaign.totalAffected ?: '?')}">0/100</td>
                        <td><a th:href="@{/evm/campaigns/{id}(id=${campaign.id})}" class="btn btn-sm btn-secondary"><i
                                    class="fas fa-eye"></i></a></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</body>

</html>