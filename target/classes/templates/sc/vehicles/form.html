<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
    th:replace="~{layout :: html(content=~{::content}, pageTitle=${vehicle.id != null ? 'Edit Vehicle' : 'Register Vehicle'})}">

<body>
    <div th:fragment="content">
        <div class="card">
            <form th:action="${vehicle.id != null ? '/sc/vehicles/' + vehicle.id : '/sc/vehicles'}" method="post"
                th:object="${vehicle}">

                <div class="form-row">
                    <div class="form-group">
                        <label for="vin">VIN *</label>
                        <input type="text" id="vin" th:field="*{vin}" class="form-control" maxlength="17" required
                            th:readonly="${vehicle.id != null}" placeholder="17-character VIN">
                        <small class="text-muted">Vehicle Identification Number (17 characters, alphanumeric)</small>
                    </div>

                    <div class="form-group">
                        <label for="customerId">Customer</label>
                        <select id="customerId" name="customerId" class="form-control">
                            <option value="">-- Select Customer --</option>
                            <option th:each="customer : ${customers}" th:value="${customer.id}"
                                th:text="${customer.fullName}" th:selected="${vehicle.customer?.id == customer.id}">
                                Customer</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="make">Make *</label>
                        <input type="text" id="make" th:field="*{make}" class="form-control" required
                            placeholder="e.g., Tesla, BYD, Rivian">
                    </div>

                    <div class="form-group">
                        <label for="model">Model *</label>
                        <input type="text" id="model" th:field="*{model}" class="form-control" required
                            placeholder="e.g., Model 3, Han EV">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="year">Year *</label>
                        <input type="number" id="year" th:field="*{year}" class="form-control" min="2015" max="2030"
                            required>
                    </div>

                    <div class="form-group">
                        <label for="color">Color</label>
                        <input type="text" id="color" th:field="*{color}" class="form-control"
                            placeholder="e.g., Pearl White">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="batteryType">Battery Type</label>
                        <input type="text" id="batteryType" th:field="*{batteryType}" class="form-control"
                            placeholder="e.g., Lithium-ion, LFP">
                    </div>

                    <div class="form-group">
                        <label for="batteryCapacity">Battery Capacity (kWh)</label>
                        <input type="number" id="batteryCapacity" th:field="*{batteryCapacity}" class="form-control"
                            step="0.1" min="0" placeholder="e.g., 75.0">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="mileage">Current Mileage</label>
                        <input type="number" id="mileage" th:field="*{mileage}" class="form-control" min="0"
                            placeholder="e.g., 25000">
                    </div>

                    <div class="form-group">
                        <label for="status">Status</label>
                        <select id="status" th:field="*{status}" class="form-control">
                            <option th:each="s : ${statuses}" th:value="${s}" th:text="${s}">Status</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="warrantyStartDate">Warranty Start Date</label>
                        <input type="date" id="warrantyStartDate" th:field="*{warrantyStartDate}" class="form-control">
                    </div>

                    <div class="form-group">
                        <label for="warrantyEndDate">Warranty End Date</label>
                        <input type="date" id="warrantyEndDate" th:field="*{warrantyEndDate}" class="form-control">
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        <span th:text="${vehicle.id != null ? 'Update Vehicle' : 'Register Vehicle'}">Save</span>
                    </button>
                    <a th:href="@{/sc/vehicles}" class="btn btn-secondary">Cancel</a>
                </div>
            </form>
        </div>
    </div>
</body>

</html>