<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
    th:replace="~{layout :: html(content=~{::content}, pageTitle=${vehicle.id != null ? 'Cập nhật xe' : 'Đăng ký xe'})}">

<body>
    <div th:fragment="content">
        <div class="card">
            <form th:action="${vehicle.id != null ? '/sc/vehicles/' + vehicle.id : '/sc/vehicles'}" method="post"
                th:object="${vehicle}">

                <div class="form-row">
                    <div class="form-group">
                        <label for="vin">Số VIN *</label>
                        <input type="text" id="vin" th:field="*{vin}" class="form-control" maxlength="17" required
                            th:readonly="${vehicle.id != null}" placeholder="Mã VIN 17 ký tự">
                        <small class="text-muted">Mã định danh xe (17 ký tự chữ và số)</small>
                    </div>

                    <div class="form-group">
                        <label for="customerId">Chủ sở hữu</label>
                        <select id="customerId" name="customerId" class="form-control">
                            <option value="">-- Chọn Khách hàng --</option>
                            <option th:each="customer : ${customers}" th:value="${customer.id}"
                                th:text="${customer.fullName}" th:selected="${vehicle.customer?.id == customer.id}">
                                Customer</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="make">Hãng sản xuất *</label>
                        <input type="text" id="make" th:field="*{make}" class="form-control" required
                            placeholder="Ví dụ: VinFast, Tesla...">
                    </div>

                    <div class="form-group">
                        <label for="model">Mẫu xe (Model) *</label>
                        <input type="text" id="model" th:field="*{model}" class="form-control" required
                            placeholder="Ví dụ: VF8, Model 3...">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="year">Năm sản xuất *</label>
                        <input type="number" id="year" th:field="*{year}" class="form-control" min="2015" max="2030"
                            required>
                    </div>

                    <div class="form-group">
                        <label for="color">Màu sắc</label>
                        <input type="text" id="color" th:field="*{color}" class="form-control"
                            placeholder="Ví dụ: Trắng ngọc trai">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="batteryType">Loại pin</label>
                        <input type="text" id="batteryType" th:field="*{batteryType}" class="form-control"
                            placeholder="Ví dụ: Lithium-ion, LFP">
                    </div>

                    <div class="form-group">
                        <label for="batteryCapacity">Dung lượng pin (kWh)</label>
                        <input type="number" id="batteryCapacity" th:field="*{batteryCapacity}" class="form-control"
                            step="0.1" min="0" placeholder="Ví dụ: 75.0">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="mileage">Số ODO hiện tại (km)</label>
                        <input type="number" id="mileage" th:field="*{mileage}" class="form-control" min="0"
                            placeholder="Ví dụ: 25000">
                    </div>

                    <div class="form-group">
                        <label for="status">Trạng thái</label>
                        <select id="status" th:field="*{status}" class="form-control">
                            <option th:each="s : ${statuses}" th:value="${s}" th:text="${s}">Status</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="warrantyStartDate">Ngày bắt đầu bảo hành</label>
                        <input type="date" id="warrantyStartDate" th:field="*{warrantyStartDate}" class="form-control">
                    </div>

                    <div class="form-group">
                        <label for="warrantyEndDate">Ngày hết hạn bảo hành</label>
                        <input type="date" id="warrantyEndDate" th:field="*{warrantyEndDate}" class="form-control">
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        <span th:text="${vehicle.id != null ? 'Cập nhật' : 'Đăng ký'}">Save</span>
                    </button>
                    <a th:href="@{/sc/vehicles}" class="btn btn-secondary">Hủy</a>
                </div>
            </form>
        </div>
    </div>
</body>

</html>