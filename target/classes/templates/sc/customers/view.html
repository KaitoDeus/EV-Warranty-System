<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
    th:replace="~{layout :: html(content=~{::content}, pageTitle='Chi tiết khách hàng')}">

<body>
    <div th:fragment="content">
        <div class="card mb-3">
            <div class="card-header">
                <h3 class="card-title" th:text="${customer.fullName}">Customer Name</h3>
                <a th:href="@{/sc/customers/{id}/edit(id=${customer.id})}" class="btn btn-secondary btn-sm">
                    <i class="fas fa-edit"></i> Sửa
                </a>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Email</label>
                    <div th:text="${customer.email}">Email</div>
                </div>
                <div class="form-group">
                    <label>Số điện thoại</label>
                    <div th:text="${customer.phone ?: 'N/A'}">Phone</div>
                </div>
            </div>

            <div class="form-group">
                <label>Địa chỉ</label>
                <div th:text="${customer.address ?: 'N/A'}">Address</div>
                <div>
                    <span th:text="${customer.city}">City</span>,
                    <span th:text="${customer.state}">State</span>, 
                    <span th:text="${customer.zipCode}">Zip</span>
                </div>
            </div>
        </div>

        <!-- Owned Vehicles -->
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Xe sở hữu</h3>
                <a th:href="@{/sc/vehicles/new}" class="btn btn-primary btn-sm">
                    <i class="fas fa-plus"></i> Thêm xe
                </a>
            </div>
            <table th:if="${!customer.vehicles.isEmpty()}">
                <thead>
                    <tr>
                        <th>Số VIN</th>
                        <th>Hãng / Mẫu xe</th>
                        <th>Năm</th>
                        <th>Trạng thái</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="vehicle : ${customer.vehicles}">
                        <td>
                            <a th:href="@{/sc/vehicles/{id}(id=${vehicle.id})}" th:text="${vehicle.vin}">VIN</a>
                        </td>
                        <td th:text="${vehicle.make + ' ' + vehicle.model}">Make Model</td>
                        <td th:text="${vehicle.year}">Year</td>
                        <td>
                            <span class="badge" th:classappend="${'status-' + vehicle.status.name().toLowerCase()}"
                                th:text="${vehicle.status}">Status</span>
                        </td>
                    </tr>
                </tbody>
            </table>
            <p th:if="${customer.vehicles.isEmpty()}" class="text-muted text-center" style="padding: 2rem;">
                Khách hàng này chưa đăng ký xe nào
            </p>
        </div>

        <div class="mt-3">
            <a th:href="@{/sc/customers}" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Quay lại danh sách
            </a>
        </div>
    </div>
</body>

</html>