<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<body>
<aside class="sidebar" th:fragment="sidebar">
    <div class="sidebar-header">
        <div class="logo">
            <i class="fas fa-car-battery"></i>
            <span>EV Warranty</span>
        </div>
    </div>

    <nav class="sidebar-nav">
        <ul class="list-unstyled mb-0">
            <li class="nav-item">
                <a th:href="@{/dashboard}" class="nav-link"
                    th:classappend="${currentSection == '' or currentSection == null or currentSection == 'dashboard'} ? 'active' : ''">
                    <i class="fas fa-home"></i>
                    <span>Trang chủ</span>
                </a>
            </li>

            <!-- Service Center Menu -->
            <li class="nav-item" th:classappend="${currentSection == 'sc'} ? 'active' : ''"
                th:if="${userRoles.contains('ROLE_SC_STAFF') or userRoles.contains('ROLE_SC_TECHNICIAN') or userRoles.contains('ROLE_ADMIN')}">
                <a href="#serviceCenterSubmenu" data-bs-toggle="collapse" aria-expanded="false"
                    class="nav-link dropdown-toggle">
                    <i class="fas fa-wrench"></i>
                    <span>Trung tâm Dịch vụ</span>
                </a>
                <div class="collapse" id="serviceCenterSubmenu"
                    th:classappend="${currentSection == 'sc'} ? 'show' : ''">
                    <ul class="nav-submenu list-unstyled">
                        <li>
                            <a th:href="@{/sc/vehicles}" th:classappend="${currentPage == 'vehicles'} ? 'active' : ''">Quản lý Xe</a>
                        </li>
                        <li>
                            <a th:href="@{/sc/customers}" th:classappend="${currentPage == 'customers'} ? 'active' : ''">Khách hàng</a>
                        </li>
                        <li>
                            <a th:href="@{/sc/claims}" th:classappend="${currentPage == 'warranty-claims'} ? 'active' : ''">Yêu cầu Bảo hành</a>
                        </li>
                        <li>
                            <a th:href="@{/sc/inventory}" th:classappend="${currentPage == 'inventory'} ? 'active' : ''">Kho phụ tùng</a>
                        </li>
                    </ul>
                </div>
            </li>

            <!-- Manufacturer Menu -->
            <li class="nav-item" th:classappend="${currentSection == 'evm'} ? 'active' : ''"
                th:if="${userRoles.contains('ROLE_EVM_STAFF') or userRoles.contains('ROLE_ADMIN')}">
                <a href="#manufacturerSubmenu" data-bs-toggle="collapse" aria-expanded="false"
                    class="nav-link dropdown-toggle">
                    <i class="fas fa-industry"></i>
                    <span>Nhà sản xuất</span>
                </a>
                <div class="collapse" id="manufacturerSubmenu"
                    th:classappend="${currentSection == 'evm'} ? 'show' : ''">
                    <ul class="nav-submenu list-unstyled">
                        <li>
                            <a th:href="@{/evm/claims}" th:classappend="${currentPage == 'claims'} ? 'active' : ''">Duyệt yêu cầu</a>
                        </li>
                        <li>
                            <a th:href="@{/evm/parts}" th:classappend="${currentPage == 'parts'} ? 'active' : ''">Danh mục Phụ tùng</a>
                        </li>
                        <li>
                            <a th:href="@{/evm/campaigns}" th:classappend="${currentPage == 'campaigns'} ? 'active' : ''">Chiến dịch Dịch vụ</a>
                        </li>
                    </ul>
                </div>
            </li>

            <!-- Admin Menu -->
            <li class="nav-item" th:classappend="${currentSection == 'admin'} ? 'active' : ''"
                th:if="${userRoles.contains('ROLE_ADMIN')}">
                <a href="#adminSubmenu" data-bs-toggle="collapse" aria-expanded="false"
                    class="nav-link dropdown-toggle">
                    <i class="fas fa-user-shield"></i>
                    <span>Quản trị</span>
                </a>
                <div class="collapse" id="adminSubmenu" th:classappend="${currentSection == 'admin'} ? 'show' : ''">
                    <ul class="nav-submenu list-unstyled">
                        <li>
                            <a th:href="@{/admin/users}" th:classappend="${currentPage == 'users'} ? 'active' : ''">Quản lý Người dùng</a>
                        </li>
                    </ul>
                </div>
            </li>
        </ul>
    </nav>

    <div class="sidebar-footer">
        <div class="user-info">
            <i class="fas fa-user-circle"></i>
            <span sec:authentication="name">User</span>
        </div>
        <form th:action="@{/logout}" method="post" style="display: inline;">
            <button type="submit" class="btn-logout" title="Đăng xuất">
                <i class="fas fa-sign-out-alt"></i>
            </button>
        </form>
    </div>
</aside>
</body>
</html>
